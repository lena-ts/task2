<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Фильмы 2018</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  
  <link href="css/styles.css" rel="stylesheet">

</head>

<body>

  <!-- Page Content -->
  <div class="main-container">
	  <div class="container">
	    <div class="row">
			<div class="col-md-6 col-sm-12 column column-list">
				<div class="articles-header">
					<div class="title"><h2>Фильмы 2018</h2></div>
					<div class="genres">
						<span class="active" data-genre="all">Все</span>
						<span data-genre="боевик">Боевик</span> 
						<span data-genre="комедия">Комедия</span>
						<span data-genre="драма">Драма</span>
						<span data-genre="ужасы">Ужасы</span>
					</div>
				</div>
				<div class="articles"><div class="row" id="articles-list"></div></div>
			</div>
			<div class="col-md-6 col-sm-12 column column-content">
				<div class="article-selected_header">
					<div class="article-selected_title"><h2></h2></div>
					<div class="article-selected_genre gray-text">2018, <span></span><div class="age-verification-label">18+</div></div>
				</div>
				<div class="tabs">
					<div class="article-selected_rating"><span class="gray-text">Рейтинг фильма по мнению 115 человек</span><span class="rating">5.8</span></div>
					<ul class="nav nav-tabs">
					  <li class="active"><a data-toggle="tab" href="#home">Описание</a></li>
					  <li><a data-toggle="tab" href="#menu1"><span class="colored-text">115</span> Отзывов</a></li>
					</ul>
					
					<div class="tab-content">
					  <div id="home" class="tab-pane fade in active show">
					    <div class="article-selected_trailer">
						    <div class="play-button">
							    <span class="play-button_icon"></span>Смотреть трейлер
							</div>
					    </div>
					    <ul class="article-selected_thumbnails">
						    <li><img src="movie/img/02.jpeg"></li>
						    <li><img src="movie/img/03.jpeg"></li>
						    <li><img src="movie/img/04.jpeg"></li>
						    <li>
							    <div class="overlay-text">+48</div>
							    <img src="movie/img/02.jpeg">
						    </li>
					    </ul>
					    
					    <div class="article-selected_content">
						   <div><span class="gray-text" >Время</span><span class="value">115 мин.</span></div>
						  <div> <span class="gray-text"> Режиссер </span><a href="#" class="value">Мартин Макдонах</a></div>

						  <div><span class="gray-text">В ролях </span><div class="value"><a href="#">Дав Камерон</a>, Аквафина, <a href="#">Питер Динклэйдж</a>, Тиффани Хэддиш, Билл Хейдер, Майя Рудольф, <a href="#">Ники Минаж</a>, Джейсон Судейкис, <a href="#">Стерлинг К. Браун</a> </div>
					    </div></div>
					  </div>
					  <div id="menu1" class="tab-pane fade">					    
					    <div class="review-statistic">
						    <div class="positive">
							    <span class="gray-text text-small"><a href="#" style="color: black;">Положительные</a></span>
							    <a href="#">83</a>
						    </div>
						    <div class="neutral">
							    <span class="gray-text text-small"><a href="#" style="color: black;">Нейтральные</a></span>
							    <a href="#" style="color: gray">15</a>
						    </div>						    
						    <div class="negative">
							    <span class="gray-text text-small"><a href="#" style="color: black;">Отрицательные</a></span>
							    <a href="#" style="color: red">17</a>
						    </div>						    
					    </div>
					    <div class="reviews-list">
						    <div class="review">		
							    <div class="author-wrapper">		
								 <div class="author-avatar"><img src="movie/user-s-5.jpg"></div>
									 <div class="author-info">		    
										 <a href="#" class="author-name">Марина Н.</a>
										 <div>
											 <span class="gray-text small-text">рецензии</span>
											 <span class="gray-text small-text">оценки</span>
											 <span class="gray-text small-text">друзья</span>
										 </div>										
									 </div> 
									 <div class="author-date">
										 <div class="text-rating">8</div>
										  <div class="small-text gray-text">12 августа 2018</div>
										  
									 </div>
							    </div>
							    <div class="text-wrapper">
								    
								    <div class="text text-positive">
									    
									    <div class="text-content">
									    В 2007 году Мартин МакДона придумал, написал и снял «Залечь на дно в Брюгге» - фильм, который понравился многим зрителям, но не был высоко оценен критиками. Ровно через 5 лет выходит его вторая работа под названием «Семь психопатов», которая еще больше понравилась зрителям, но совсем не произвела впечатления на критиков. Прошло еще 5 лет и МакДона снимает «Три билборда на границе Эббинга, Миссури», поразивший зрителей наповал! Жизнь как она есть не так интересна для обывателя как события связаны с форс-мажором, пожары, наводнения, истории убийств — все это интереснее и, самое главное, легче для осмысления сценаристами.		
									    </div>						
								    </div>	
							    </div>
							    		    
						    </div>
						    <div class="review">		
							    <div class="author-wrapper">		
								 <div class="author-avatar"><img src="movie/user-s-2.jpg"></div>
									 <div class="author-info">		    
										 <a href="#" class="author-name">Миша П.</a>
										 <div>
											 <span class="gray-text small-text">рецензии</span>
											 <span class="gray-text small-text">оценки</span>
											 <span class="gray-text small-text">друзья</span>
										 </div>										
									 </div> 
									 <div class="author-date">
										 <div class="text-rating text-rating__negative">4</div>
										  <div class="small-text gray-text">12 августа 2018</div>
										  
									 </div>
							    </div>
							    <div class="text-wrapper">
								    
								    <div class="text text-negative">
									    
									    <div class="text-content">
									   Рискну пойти против общей тенденции и сказать, что мне скорее НЕ понравился расхваленный критиками фильм «Три билборда на границе Эббинга, Миссури». Что там есть: яркие характеры, причём все актёры выложились по полной, персонажи никак ходульными не назовёшь – скорее чуть гротескными, но какая драма без этого? 		
									    </div>						
								    </div>	
							    </div>
							    		    
						    </div>						    					    
					    </div>
					  </div>
					</div>					
				</div>
			</div>
	    </div>
	  </div>
  </div>

  <!-- Bootstrap core JavaScript -->
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<!--   <script src="vendor/jquery/jquery.min.js"></script> -->
<!--  <script src="vendor/jquery/jquery.slim.min.js"></script> -->
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  
  <script>
	  var listWrapper = document.querySelector('.column-list .articles .row');
	  
	  var requestURL = 'movies.json';
	  var request = new XMLHttpRequest();
    
	  request.open('GET', requestURL);
	  request.responseType = 'json';
	  request.send();    
	
	  request.onload = function() {
	 	 var moviesList = request.response;
	 	 populateMoviesList(moviesList);
		}	 
  	       
	function populateMoviesList(jsonObj) {	       
       for (var i = 0; i < jsonObj.length; i++) {
		  var movieItem = document.createElement('article'),
		      movieItemName = document.createElement('h3'),
		  	  movieItemImageWrapper = document.createElement('div'),
		  	  movieItemImage = document.createElement('img'),
		  	  movieItemRating = document.createElement('div'),
		  	  movieItemGenre = document.createElement('div'); 	  		  	  
		  	  	
		  	  movieItem.className = "article col-lg-4 col-md-6 col-sm-12";	
		  	  movieItemImageWrapper.className = "article-image-wrapper";
		  	  movieItemRating.className = "article-rating";
		  	  movieItemGenre.className = "article-genre";
		  	  
		      movieItemName.textContent = jsonObj[i].title;
		      movieItemImage.src = jsonObj[i].img;
		      movieItemRating.textContent = jsonObj[i].rating;
		      movieItemGenre.textContent = jsonObj[i].genre;
		      	      
		      movieItemImageWrapper.appendChild(movieItemImage);	
		      movieItemImageWrapper.appendChild(movieItemRating);	
		      
		      movieItem.appendChild(movieItemImageWrapper);	
		      movieItem.appendChild(movieItemName);	
		      movieItem.appendChild(movieItemGenre);	 
		      
		      listWrapper.appendChild(movieItem);        
       }
     
       	$('article').click(function(){
	       	$(this).siblings().removeClass('active');
			$(this).addClass('active');
			
			var activeTitle = $(this).find('h3').text(),
				activeGenre = $(this).find($('.article-genre')).text(),
				activeImage = $(this).find($('img')).attr('src'),
				activeRating = $(this).find($('.article-rating')).text();
			
			$('.article-selected_title h2').text(activeTitle);
			$('.article-selected_genre span').text(activeGenre);
			$('.article-selected_trailer').css('background-image', 'url(' + activeImage+ ')');
			$('.article-selected_rating .rating').text(activeRating);
		});	
		
		$('article').eq(0).addClass('active').click();		
	} 
	
	//Tabs
	$('.nav-tabs li').click(function(){
		$(this).siblings().removeClass('active');
		$(this).addClass('active');
	});
	
	//Genres filter
	$('.genres span').click(function(){
		$(this).addClass('active');
		$(this).siblings().removeClass('active');
		var search = $(this).attr('data-genre');
		
		for (i = 0; i <= $('.article').length -1; i++) {
			var str = $('.article').eq(i).find($('.article-genre')).text(),
				result = str.match( search );
			
			if ( result ) $('.article').eq(i).show();	
			else $('.article').eq(i).hide();
		}
		
		if ($(this).attr('data-genre') == 'all') {
			$('.article').show();
		}		
	});
  </script>

</body>

</html>
